---
import MainLayout from "../../../layouts/MainLayout.astro";
import EntityDataJsonFile from "../../../../public/data/EntityDataJsonFile.json";
import SkillDataJsonFile from "../../../../public/data/SkillDataJsonFile.json";
import PageButtonClassOrigin from "../../../components/PageContent/PageButtonClassOrigin.astro";
import type { EntityData } from "../../../../public/data/EntityDataStructure";
import PageSkillPanel from "../../../components/PageContent/PageSkillPanel.astro";
import type { SkillData } from "../../../../public/data/SkillDataStructure";
import PageEntityStat from "../../../components/PageContent/PageEntityStat.astro";
import PageSubHeader from "../../../components/PageContent/PageSubHeader.astro";
//
export async function getStaticPaths() {
	return EntityDataJsonFile.entityDataJsonArray.map((entry) => ({
		params: {
			battleEntityName: entry.Identifier.toLowerCase().split(" ").join("-"),
		},
		props: {
			battleEntityObject: entry,
			skillObject: SkillDataJsonFile.skillDataJsonArray.find(
				(skill) => skill.Identifier === entry.SkillID
			),
		},
	}));
}
//
interface Props {
	battleEntityObject: EntityData;
	skillObject: SkillData;
}
//
const { battleEntityObject, skillObject } = Astro.props;
---

<MainLayout topTitle={battleEntityObject.Identifier}>
	<PageButtonClassOrigin
		originName={battleEntityObject.OriginID}
		className={battleEntityObject.ClassID}
	/>
	<PageEntityStat statObject={battleEntityObject.Statistics} />
	<PageSubHeader
		headerLink={"../skills/" +
			skillObject.Identifier.toLowerCase().split(" ").join("-")}
		headerTitle={skillObject.Identifier}
	/>
	<PageSkillPanel skillObject={skillObject} />
</MainLayout>
